<app-notification></app-notification>

<!-- BEGIN breadcrumb -->
<ol class="breadcrumb float-xl-end">
	<li class="breadcrumb-item"><a href="javascript:;">Home</a></li>
	<li class="breadcrumb-item"><a href="javascript:;">Files</a></li>
	<li class="breadcrumb-item active">Project request</li>
</ol>
<!-- END breadcrumb -->
<!-- BEGIN page-header -->
<h1 class="page-header">List of all the project request</h1>
<!-- END page-header -->

<!-- BEGIN row -->
<div class="row">
	<!-- BEGIN col-12 -->
	<div class="col-xl-12">
		<!-- BEGIN panel -->
		<panel title="List project request" footerClass="pb-0 pt-20px">

			<!-- Loader Logic -->
			<div *ngIf="!listItems" class="panel-body panel-height-dynamic">
				<div>
					<div class="card-body">
						<div class="fa-3x spinner-position">
							<i class="fas fa-circle-notch fa-spin"></i>
						</div>
					</div>
				</div>
			</div>
			<!-- Loader Logic -->

			<div class="table table-striped table-bordered align-middle mb-3 ">
				<table datatable [dtOptions]="dtoptions" [dtTrigger]="dtTrigger" id="data-table-fixed-columns" class="table table-striped table-bordered align-middle dataTable no-footer dtr-inline">
					<thead>
						<tr *ngIf="listItems">
							<th>Order</th>
							<th>Date</th>
							<th>Type</th>
							<th>Bussiness Analysts</th>
							<th>Data Analysts</th>
							<th>Status</th>
							<th>Action</th>
						</tr>
					</thead>
					<tbody>
						<tr *ngFor="let data of listItems">
							<td><a routerLink='/task/{{data._id}}/details' class="fw-bold">#{{data._source.id | slice: -5 }}</a></td>
							<td>{{data._source.createdAt | date: 'dd/MM/yyyy hh:mm a'}}</td>
							<td *ngIf="data._source.approximateTimeLine.selectedTimelineInHrs == 24">Quick request</td>
							<td *ngIf="data._source.approximateTimeLine.selectedTimelineInHrs > 24">Project request</td>
							<td>{{data._source.currentlyBussinessAnalystsWith.name}}</td>
							<td *ngIf="(data._source.currentlyDataAnalystsWith | json) != ({} | json)">{{data._source.currentlyDataAnalystsWith.name}}</td>	
							<td *ngIf="(data._source.currentlyDataAnalystsWith | json) == ({} | json) && data._source.customSteps.length === 8">
								<span *ngIf="data._source.isRejected">------</span>
								<span *ngIf="!data._source.isRejected">Yet to assigned</span>
							</td>	

							<td>
								<span *ngIf="data._source.status && !data._source.isRejected" class="badge border border-warning text-warning px-2 pt-5px pb-5px rounded fs-12px d-inline-flex align-items-center">
									<i class="fa fa-circle fs-9px fa-fw me-5px"></i>
									<span *ngIf="data._source.currentStatus.stepNo == 5">Completed by data analysts</span> 
									<span *ngIf="data._source.currentStatus.stepNo != 5">{{data._source.currentStatus.stepName}}</span> 
								</span>
								<span *ngIf="!data._source.status && !data._source.isRejected" class="badge border border-success text-success px-2 pt-5px pb-5px rounded fs-12px d-inline-flex align-items-center">
									<i  class="fa fa-circle fs-9px fa-fw me-5px"></i>Completed
								</span>
								<span *ngIf="data._source.isRejected" class="badge border border-red text-red px-2 pt-5px pb-5px rounded fs-12px d-inline-flex align-items-center">
									<i  class="fa fa-circle fs-9px fa-fw me-5px"></i>Rejected
								</span>
							</td>
									
							<td>
								<!-- <a *ngIf="data._source.status" href="javascript:;" class="btn btn-default me-5px"><i class="fa fa-comment"></i> Start chart</a> -->
								<a *ngIf="!data._source.status" href="javascript:;" [swal]="['Success', 'typ.xls successfully downloaded', 'success']" class="btn btn-success me-1">Download file</a>
								<a routerLink='/task/{{data._id}}/details' href="javascript:;" class="btn btn-dark"><i class="fa fa-desktop"></i> Details</a>
							</td>
						</tr>
					</tbody>
				</table>
			</div>
		</panel>
		<!-- END panel -->
	</div>
	<!-- END col-12 -->
</div>
<!-- END row -->